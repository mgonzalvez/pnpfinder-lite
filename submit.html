<!doctype html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PnPFinder — Submit an Entry</title>
  <meta name="color-scheme" content="dark light" />
  <link rel="stylesheet" href="/css/style.css" />

  <!-- Small page-local CSS to make the form one-item-per-line without touching global styles -->
  <style>
    /* Vertical form layout: one field per line */
    .form-vertical .filters-grid { display: grid; grid-template-columns: 1fr; gap: .75rem; }
    .form-vertical .select label { display: grid; gap: .35rem; }
    .help { color: var(--muted); font-size: .85rem; }
    .count { color: var(--muted); font-size: .85rem; justify-self: end; }
    .counter-row { display: flex; justify-content: space-between; gap: .75rem; align-items: center; }
    .error-text { color: #ff6b6b; font-size: .9rem; }
  </style>

  <!-- Papa Parse for reading /data/games.csv to populate dropdowns -->
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
  <script type="module" src="/js/submit.js" defer></script>
</head>
<body>
  <header class="site-header wrap" role="banner">
    <div class="brand">
      <h1><a class="brand-link" href="/">PnPFinder</a></h1>
      <p class="tagline">Submit a Game, Tutorial, or Resource.</p>

      <nav class="top-nav" aria-label="Primary">
        <a href="/" class="nav-link">Games</a>
        <a href="/tutorials.html" class="nav-link">Tutorials</a>
        <a href="/resources.html" class="nav-link">Resources</a>
        <a href="/submit.html" class="nav-link active" aria-current="page">Submit</a>
      </nav>
    </div>

    <div class="controls">
      <div class="theme">
        <button id="themeToggle" class="toggle" aria-pressed="false" title="Switch theme">Dark</button>
      </div>
    </div>
  </header>

  <main class="wrap" role="main">
    <article class="detail-section" style="margin-top:1rem">
      <h3>Submit an entry</h3>
      <p class="help" style="margin-top:.25rem">Game submissions require specific fields. Tutorials/Resources are simpler.</p>

      <form id="submitForm" class="form-vertical" enctype="multipart/form-data" novalidate>
        <!-- honeypot (anti-spam) -->
        <input type="text" name="website" aria-hidden="true" tabindex="-1" autocomplete="off" style="position:absolute;left:-9999px;height:0;width:0;padding:0;border:0;" />

        <!-- Type + Image -->
        <div class="filters-grid" style="margin-top:.75rem">
          <div class="select">
            <label for="collection">Type</label>
            <select id="collection" name="collection" required>
              <option value="games" selected>Game</option>
              <option value="tutorials">Tutorial</option>
              <option value="resources">Resource</option>
            </select>
          </div>

          <div class="select">
            <label for="image">Image (JPG/PNG/WebP, &lt; 5MB)</label>
            <input id="image" name="image" type="file" accept="image/*" />
            <p class="help">Required for Games; optional for Tutorials/Resources.</p>
          </div>
        </div>

        <!-- GAME FIELDS -->
        <fieldset id="gameFields" class="detail-section" style="margin-top:1rem">
          <legend>Game</legend>

          <div class="filters-grid">
            <div class="select">
              <label for="gameTitle">Game Title</label>
              <input id="gameTitle" name="Game Title" required />
            </div>

            <div class="select">
              <label for="designer">Designer</label>
              <input id="designer" name="Designer" />
            </div>

            <div class="select">
              <label for="publisher">Publisher</label>
              <input id="publisher" name="Publisher" />
            </div>

            <div class="select">
              <label for="freePaid">Free or Paid</label>
              <select id="freePaid" name="Free or Paid" required>
                <option value="" disabled selected>— Select —</option>
              </select>
            </div>

            <div class="select">
              <label for="price">Price</label>
              <input id="price" name="Price" placeholder="e.g., $0 / $5" />
            </div>

            <div class="select">
              <label for="players">Number of Players</label>
              <select id="players" name="Number of Players" required>
                <option value="" disabled selected>— Select —</option>
              </select>
            </div>

            <div class="select">
              <label for="playtime">Playtime</label>
              <input id="playtime" name="Playtime" placeholder="30–60" required />
            </div>

            <div class="select">
              <label for="ageRange">Age Range</label>
              <select id="ageRange" name="Age Range" required>
                <option value="" disabled selected>— Select —</option>
              </select>
            </div>

            <div class="select">
              <label for="theme">Theme</label>
              <select id="theme" name="Theme" required>
                <option value="" disabled selected>— Select —</option>
              </select>
            </div>

            <div class="select">
              <label for="mainMech">Main Mechanism</label>
              <select id="mainMech" name="Main Mechanism" required>
                <option value="" disabled selected>— Select —</option>
              </select>
            </div>

            <div class="select">
              <label for="secondaryMech">Secondary Mechanism</label>
              <select id="secondaryMech" name="Secondary Mechanism">
                <option value="" selected>—</option>
              </select>
            </div>

            <div class="select">
              <label for="complexity">Gameplay Complexity</label>
              <select id="complexity" name="Gameplay Complexity" required>
                <option value="" disabled selected>— Select —</option>
              </select>
            </div>

            <div class="select">
              <label for="mode">Gameplay Mode</label>
              <select id="mode" name="Gameplay Mode">
                <option value="" selected>—</option>
              </select>
              <p class="help">Examples: Solo, Cooperative, Competitive</p>
            </div>

            <div class="select">
              <label for="category">Game Category</label>
              <select id="category" name="Game Category">
                <option value="" selected>—</option>
              </select>
            </div>

            <div class="select">
              <label for="craft">PnP Crafting Challenge Level</label>
              <select id="craft" name="PnP Crafting Challenge Level" required>
                <option value="" disabled selected>— Select —</option>
              </select>
            </div>

            <div class="select">
              <div class="counter-row">
                <label for="shortDesc">One-Sentence Short Description</label>
                <span id="shortDescCount" class="count">0 / 125</span>
              </div>
              <textarea id="shortDesc" name="One-Sentence Short Description" rows="2" maxlength="125" required></textarea>
            </div>

            <div class="select">
              <div class="counter-row">
                <label for="longDesc">Long Description</label>
                <span id="longDescCount" class="count">0 / 400</span>
              </div>
              <textarea id="longDesc" name="Long Description" rows="4" maxlength="400" required></textarea>
            </div>

            <div class="select">
              <label for="dl1">Main Download Link</label>
              <input id="dl1" name="Download Link" type="url" inputmode="url" placeholder="https://…" required />
            </div>

            <div class="select">
              <label for="dl2">Secondary Download Link</label>
              <input id="dl2" name="Secondary Download Link" type="url" inputmode="url" placeholder="https://…" />
            </div>

            <div class="select">
              <label for="printComp">Print Components</label>
              <input id="printComp" name="Print Components" />
            </div>

            <div class="select">
              <label for="otherComp">Other Components</label>
              <input id="otherComp" name="Other Components" />
            </div>

            <div class="select">
              <label for="releaseYear">Release Year</label>
              <input id="releaseYear" name="Release Year" type="number" min="1900" max="2100" required />
            </div>

            <div class="select">
              <label for="lists">Curated Lists</label>
              <input id="lists" name="Curated Lists" placeholder="Solo 2025; 18XX; …" />
            </div>
          </div>
        </fieldset>

        <!-- TUTORIAL FIELDS -->
        <fieldset id="tutorialFields" class="detail-section" style="margin-top:1rem;display:none">
          <legend>Tutorial</legend>
          <div class="filters-grid">
            <div class="select"><label for="tComponent">Component</label><input id="tComponent" name="Component" /></div>
            <div class="select"><label for="tTitle">Title</label><input id="tTitle" name="Title" /></div>
            <div class="select"><label for="tCreator">Creator</label><input id="tCreator" name="Creator" /></div>
            <div class="select"><label for="tDesc">Description</label><textarea id="tDesc" name="Description" rows="3"></textarea></div>
            <div class="select"><label for="tLink">Link</label><input id="tLink" name="Link" type="url" inputmode="url" placeholder="https://…" /></div>
          </div>
        </fieldset>

        <!-- RESOURCE FIELDS -->
        <fieldset id="resourceFields" class="detail-section" style="margin-top:1rem;display:none">
          <legend>Resource</legend>
          <div class="filters-grid">
            <div class="select"><label for="rCategory">Category</label><input id="rCategory" name="Category" /></div>
            <div class="select"><label for="rTitle">Title</label><input id="rTitle" name="Title" /></div>
            <div class="select"><label for="rCreator">Creator</label><input id="rCreator" name="Creator" /></div>
            <div class="select"><label for="rDesc">Description</label><textarea id="rDesc" name="Description" rows="3"></textarea></div>
            <div class="select"><label for="rLink">Link</label><input id="rLink" name="Link" type="url" inputmode="url" placeholder="https://…" /></div>
          </div>
        </fieldset>

        <div class="filter-actions" style="margin-top:1rem">
          <button type="submit" class="primary">Submit</button>
          <button type="reset" class="secondary">Reset</button>
        </div>

        <p id="submitStatus" class="results-meta" role="status" style="margin-top:.75rem"></p>
        <p id="submitError" class="error-text" role="alert" style="display:none"></p>
      </form>
    </article>

    <nav class="detail-back">
      <a href="/" class="btn secondary">&larr; Back to Games</a>
    </nav>
  </main>

  <footer class="site-footer wrap">
    <small>© <span id="year"></span> PnPFinder</small>
  </footer>
</body>
</html>
